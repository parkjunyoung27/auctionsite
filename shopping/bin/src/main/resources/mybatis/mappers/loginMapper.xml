<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="login">

	<select id="login" parameterType="LoginDTO" resultType="LoginDTO">
		SELECT member_id, member_name, member_level
		FROM member
		WHERE member_id=#{member_id} 
		AND member_pw=HEX(AES_ENCRYPT(#{member_pw},#{member_id}));
	</select>

	 <select id="idCheck" parameterType="String" resultType="Integer">
 	 	SELECT count(*) FROM member WHERE member_id=#{id}
 	 </select>
 	 
 	 <insert id="insertJoin" parameterType="LoginDTO">
 	 	INSERT INTO member(member_id, member_pw, member_name, member_email, member_address, member_phone, member_birth) 
 	 	VALUES(#{member_id}, HEX(AES_ENCRYPT(#{member_pw}, #{member_id})), #{member_name}, #{member_email}, #{member_address}, #{member_phone}, #{member_birth} ) 	 	
 	 </insert>

</mapper>